@model XCode.Membership.User
@using System.Linq
@using System.Reflection
@using XCode
@using XCode.Configuration
@using NewLife.Cube.Entity;
@using NewLife;
@using NewLife.Security;
@using NewLife.Serialization;
@{
    Layout = null;

    var set = NewLife.Cube.Setting.Current;
    var cfg = NewLife.Common.SysConfig.Current;

    var title = ViewBag.Title + "";
    if (set.TitlePrefix && title != "" && !title.Contains(" - ")) title += " - " + cfg.DisplayName;

    var res = set.ResourceUrl;
    if (String.IsNullOrEmpty(res)) res = "/Content";
    res = res.TrimEnd('/');

    var provinces = XCode.Membership.Area.Root.Childs;
    var cities = provinces.SelectMany(e => e.Childs.Where(e => e.Longitude > 0)).ToList();
    var all = provinces.Union(cities).ToList();
    var data = new List<Object>();
    var data2 = new List<Object>();
    foreach (var item in all)
    {
        if (item.Longitude != 0 || item.Latitude != 0)
        {
            if (item.Kind != "直辖市")
            {
                data.Add(new
                {
                    name = item.Name,
                    value = new[] { item.Longitude, item.Latitude, Rand.Next(10, 300) },
                });
            }
            else
            {
                data2.Add(new
                {
                    name = item.Name,
                    value = new[] { item.Longitude, item.Latitude, Rand.Next(10, 300) },
                });
            }
        }
    }
}
@await Html.PartialAsync("_BaiDuMap")
@await Html.PartialAsync("_Footer")